{% extends "base.html" %}

{% block content %}
<!-- 1. Hero Section with Avatar -->
<div class="card animate-enter">
    <div class="profile-header">
        <div class="avatar">
            {{ user.username[0].upper() }}
        </div>
        <div>
            <h2 style="margin:0; font-size:2rem; letter-spacing:-0.5px;">{{ user.username }}</h2>
            <p style="margin:5px 0; color:var(--text-muted);">
                <i class="fas fa-calendar-alt"></i> Member since {{ user.joined_date or '2023' }}
            </p>
            <div style="margin-top:10px;">
                <span style="background:rgba(16, 185, 129, 0.2); color:#10b981; padding:5px 12px; border-radius:20px; font-size:0.8rem; font-weight:700;">
                    â— Active
                </span>
                <span style="background:rgba(99, 102, 241, 0.2); color:var(--primary); padding:5px 12px; border-radius:20px; font-size:0.8rem; font-weight:700; margin-left:5px;">
                    Free Plan
                </span>
            </div>
        </div>
    </div>
</div>

<div class="grid-2">
    <!-- 2. Security Settings -->
    <div class="card animate-enter delay-1">
        <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
            <h3>ğŸ” Security</h3>
            <i class="fas fa-shield-alt" style="font-size:1.5rem; opacity:0.2;"></i>
        </div>
        
        <form onsubmit="event.preventDefault(); updateProfile();">
            <div style="margin-bottom: 20px;">
                <label class="stat-label">Username</label>
                <div style="position:relative;">
                    <input class="input" value="{{ user.username }}" disabled style="opacity:0.6; padding-left:40px; cursor:not-allowed;">
                    <i class="fas fa-user" style="position:absolute; left:12px; top:15px; opacity:0.5;"></i>
                </div>
            </div>

            <div style="margin-bottom: 20px;">
                <label class="stat-label">Email Address</label>
                <div style="position:relative;">
                    <input id="pEmail" class="input" type="email" placeholder="{{ user.email or 'Link your email' }}" style="padding-left:40px;">
                    <i class="fas fa-envelope" style="position:absolute; left:12px; top:15px; opacity:0.5;"></i>
                </div>
            </div>

            <div style="margin-bottom: 20px;">
                <label class="stat-label">New Password</label>
                <div style="position:relative;">
                    <input id="pPass" class="input" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" style="padding-left:40px;">
                    <i class="fas fa-lock" style="position:absolute; left:12px; top:15px; opacity:0.5;"></i>
                </div>
            </div>

            <button type="submit" class="btn" style="width: 100%;">
                Update Credentials <i class="fas fa-arrow-right" style="margin-left:5px;"></i>
            </button>
        </form>
    </div>

    <!-- 3. Preferences & Danger Zone -->
    <div style="display:flex; flex-direction:column; gap:1.5rem;">
        
        <!-- Visual Preferences -->
        <div class="card animate-enter delay-2">
            <h3>âš™ï¸ Preferences</h3>
            
            <!-- Dark Mode -->
            <div style="display:flex; justify-content:space-between; align-items:center; padding:15px 0; border-bottom:1px solid var(--glass-border);">
                <div>
                    <div style="font-weight:600;">Appearance</div>
                    <div style="font-size:0.8rem; color:var(--text-muted);">Switch between Light & Dark</div>
                </div>
                <button onclick="toggleTheme()" style="background:transparent; border:1px solid var(--text-muted); padding:5px 10px; border-radius:8px; cursor:pointer; color:var(--text-main);">
                    <i class="fas fa-moon"></i> Toggle
                </button>
            </div>
            
            <!-- Currency -->
            <div style="display:flex; justify-content:space-between; align-items:center; padding-top:15px;">
                <div>
                    <div style="font-weight:600;">Currency</div>
                    <div style="font-size:0.8rem; color:var(--text-muted);">Default INR (â‚¹)</div>
                </div>
                <select class="input" style="width:auto; padding:5px 10px;">
                    <option selected>ğŸ‡®ğŸ‡³ INR</option>
                    <option>ğŸ‡ºğŸ‡¸ USD</option>
                    <option>ğŸ‡ªğŸ‡º EUR</option>
                </select>
            </div>
        </div>

        <!-- Danger Zone -->
        <div class="card animate-enter delay-3" style="border:1px solid rgba(244, 63, 94, 0.3); background:rgba(244, 63, 94, 0.05);">
            <h3 style="color:var(--accent);">âš ï¸ Danger Zone</h3>
            <p style="font-size:0.9rem; color:var(--accent); margin-bottom:15px; opacity:0.8;">
                Irreversible action. All your expenses, budgets, and history will be wiped.
            </p>
            <button class="btn btn-danger" onclick="deleteAccount()" style="width:100%;">
                <i class="fas fa-trash-alt"></i> Delete My Account
            </button>
        </div>
    </div>
</div>
{% endblock %}